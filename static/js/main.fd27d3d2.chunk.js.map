{"version":3,"sources":["../node_modules/shex/lib sync","shapes/shex.ts","SessionContext.ts","components/Profile/_components/FormSection.tsx","components/Profile/Profile.tsx","App.tsx","index.tsx","components/Profile/Profile.module.css","App.module.css","../node_modules/n3/lib sync /^/.//N3.*$"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","SolidProfileShapeType","EmailShapeType","SolidProfileShapeContext","EmailShapeContext","solidProfileShex","solidProfile","Shape","shape","context","type","childContexts","SessionContext","React","createContext","FormSection","name","label","placeholder","defaultValue","onChange","className","styles","section","fontWeight","css","Profile","useContext","info","fetch","useState","profile","setProfile","error","setError","webId","useEffect","fetcher","_fetch","findOne","from","where","then","data","errors","hasEmail","fontSize","marginBottom","initialValues","email","value","replace","onSubmit","a","console","debug","update","doc","result","log","values","handleChange","dirty","touched","buttons","marginRight","onClick","auth","logout","window","location","reload","disabled","App","session","setSession","isLoading","setIsLoading","handleIncomingRedirect","restorePreviousSession","getDefaultSession","isLoggedIn","main","Provider","webIdObject","URL","login","oidcIssuer","protocol","host","ReactDOM","render","StrictMode","document","getElementById","map","webpackContext","webpackContextResolve","__webpack_require__","o","Object"],"mappings":"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","file":"static/js/main.fd27d3d2.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1098;","import { NamedNode, Literal } from \"rdflib\";\nimport { Shape } from \"shex-methods\";\n\nexport interface BasicShape {\n  id: string;\n}\n\nexport type SolidProfileShape = {\n  hasEmail?: EmailShape | EmailShape[]; // The person's email.\n  name?: string | Literal; // An alternate way to define a person's name\n} & {\n  type: (\n    | SolidProfileShapeType.SchemPerson\n    | SolidProfileShapeType.FoafPerson\n  )[]; // Defines the node as a Person\n} & BasicShape;\n\nexport type EmailShape = {\n  value: string | NamedNode; // The value of an email as a mailto link (Example <mailto:jane@example.com>)\n} & {\n  type?: (\n    | EmailShapeType.Dom\n    | EmailShapeType.Home\n    | EmailShapeType.Isdn\n    | EmailShapeType.Internet\n    | EmailShapeType.Intl\n    | EmailShapeType.Label\n    | EmailShapeType.Parcel\n    | EmailShapeType.Postal\n    | EmailShapeType.Pref\n    | EmailShapeType.Work\n    | EmailShapeType.X400\n  )[]; // The type of email.\n} & BasicShape;\n\nexport enum SolidProfileShapeType {\n  SchemPerson = \"http://schema.org/Person\",\n  FoafPerson = \"http://xmlns.com/foaf/0.1/Person\",\n}\n\nexport enum EmailShapeType {\n  Dom = \"http://www.w3.org/2006/vcard/ns#Dom\",\n  Home = \"http://www.w3.org/2006/vcard/ns#Home\",\n  Isdn = \"http://www.w3.org/2006/vcard/ns#ISDN\",\n  Internet = \"http://www.w3.org/2006/vcard/ns#Internet\",\n  Intl = \"http://www.w3.org/2006/vcard/ns#Intl\",\n  Label = \"http://www.w3.org/2006/vcard/ns#Label\",\n  Parcel = \"http://www.w3.org/2006/vcard/ns#Parcel\",\n  Postal = \"http://www.w3.org/2006/vcard/ns#Postal\",\n  Pref = \"http://www.w3.org/2006/vcard/ns#Pref\",\n  Work = \"http://www.w3.org/2006/vcard/ns#Work\",\n  X400 = \"http://www.w3.org/2006/vcard/ns#X400\",\n}\n\nexport enum SolidProfileShapeContext {\n  type = \"rdf:type\",\n  hasEmail = \"vcard:hasEmail\",\n  name = \"foaf:name\",\n}\n\nexport enum EmailShapeContext {\n  type = \"rdf:type\",\n  value = \"vcard:value\",\n}\n\nexport const solidProfileShex = `\nPREFIX srs: <https://shaperepo.com/schemas/solidProfile#>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX schem: <http://schema.org/>\nPREFIX vcard: <http://www.w3.org/2006/vcard/ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n\nsrs:SolidProfileShape EXTRA a {\n  a [ schem:Person ]\n    // rdfs:comment  \"Defines the node as a Person\" ;\n  a [ foaf:Person ]\n    // rdfs:comment  \"Defines the node as a Person\" ;\n  vcard:hasEmail @srs:EmailShape *\n    // rdfs:comment  \"The person's email.\" ;\n  foaf:name xsd:string ?\n    // rdfs:comment  \"An alternate way to define a person's name\" ;\n}\n\nsrs:EmailShape EXTRA a {\n  a [\n    vcard:Dom\n    vcard:Home\n    vcard:ISDN\n    vcard:Internet\n    vcard:Intl\n    vcard:Label\n    vcard:Parcel\n    vcard:Postal\n    vcard:Pref\n    vcard:Work\n    vcard:X400\n  ] ?\n    // rdfs:comment  \"The type of email.\" ;\n  vcard:value IRI\n    // rdfs:comment  \"The value of an email as a mailto link (Example <mailto:jane@example.com>)\" ;\n}\n`;\n\nexport const solidProfile = new Shape<SolidProfileShape>({\n  id: \"https://shaperepo.com/schemas/solidProfile#SolidProfileShape\",\n  shape: solidProfileShex,\n  context: SolidProfileShapeContext,\n  type: SolidProfileShapeType,\n  childContexts: [EmailShapeContext],\n});\n\nexport const email = new Shape<EmailShape>({\n  id: \"https://shaperepo.com/schemas/solidProfile#EmailShape\",\n  shape: solidProfileShex,\n  context: EmailShapeContext,\n  type: EmailShapeType,\n});\n","import { Session } from \"@inrupt/solid-client-authn-browser\";\nimport React from \"react\";\n\nexport const SessionContext = React.createContext<Session | null>(null);\n","import React from \"react\";\nimport { TextInput, Text } from \"@primer/components\";\nimport styles from \"./../Profile.module.css\";\n\nexport interface FormSectionProps {\n  label: string;\n  name: string;\n  defaultValue?: string | number;\n  onChange: React.ChangeEventHandler<HTMLInputElement>;\n  placeholder?: string;\n}\n\nexport const FormSection: React.FC<FormSectionProps> = ({\n  name,\n  label,\n  placeholder,\n  defaultValue,\n  onChange,\n}) => {\n  return (\n    <div className={styles.section}>\n      <Text className={styles.label} fontWeight=\"bold\">\n        {label}\n      </Text>\n      <TextInput\n        css=\"\"\n        name={name}\n        placeholder={placeholder ?? label}\n        defaultValue={defaultValue}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { Formik, Form } from \"formik\";\nimport { ButtonPrimary, Text, ButtonDanger } from \"@primer/components\";\nimport auth from \"solid-auth-client\";\nimport { Session } from \"@inrupt/solid-client-authn-browser\";\n\nimport { solidProfile, SolidProfileShape, EmailShape } from \"../../shapes/shex\";\nimport { SessionContext } from \"../../SessionContext\";\n\nimport { FormSection } from \"./_components/FormSection\";\nimport styles from \"./Profile.module.css\";\n\nexport const Profile: React.FC = () => {\n  const { info, fetch } = useContext(SessionContext) as Session & {\n    info: { webId: string };\n  };\n  const [profile, setProfile] = useState<SolidProfileShape | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const { webId } = info;\n\n  useEffect(() => {\n    solidProfile.fetcher._fetch = fetch;\n    solidProfile\n      .findOne({\n        from: webId,\n        where: { id: webId },\n      })\n      .then(({ data, errors }) => {\n        if (errors) {\n          setError(errors[0]);\n        } else if (data) {\n          setProfile(data);\n        }\n      });\n  }, [webId, fetch]);\n\n  if (error) {\n    return <div>{error}</div>;\n  } else if (!profile) {\n    return <div>Loading...</div>;\n  }\n\n  const { name, hasEmail } = profile as SolidProfileShape;\n\n  return (\n    <>\n      <Text fontSize=\"2em\" marginBottom=\"16px\">\n        Hello, {name}\n      </Text>\n      <Formik\n        initialValues={{\n          name,\n          email: ((hasEmail as EmailShape)?.value as string)?.replace(\n            \"mailto:\",\n            \"\"\n          ),\n        }}\n        onSubmit={async (data) => {\n          console.debug(data);\n          const result = await solidProfile.update({\n            doc: webId,\n            data: {\n              id: webId,\n              name: data.name,\n              hasEmail: {\n                value: data.email && \"mailto:\" + data.email,\n              } as EmailShape,\n            },\n          });\n          console.log(result);\n        }}\n      >\n        {({ values, handleChange, dirty, touched }) => (\n          <Form>\n            <FormSection\n              label=\"Name\"\n              name=\"name\"\n              defaultValue={values.name as string}\n              onChange={handleChange}\n            />\n            <FormSection\n              label=\"Email\"\n              name=\"email\"\n              defaultValue={values.email}\n              onChange={handleChange}\n            />\n            <div className={styles.buttons}>\n              <ButtonDanger\n                css\n                marginRight=\"8px\"\n                onClick={() => {\n                  auth.logout().then(() => {\n                    window.location.reload();\n                  });\n                }}\n              >\n                Logout\n              </ButtonDanger>\n              <ButtonPrimary css disabled={!(dirty || !touched)} name=\"submit\">\n                Submit\n              </ButtonPrimary>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </>\n  );\n};\n\nexport default Profile;\n","import React, { useEffect, useState } from \"react\";\nimport { Formik, Form } from \"formik\";\nimport { ThemeProvider, BaseStyles, Button } from \"@primer/components\";\nimport {\n  login,\n  handleIncomingRedirect,\n  getDefaultSession,\n  Session,\n} from \"@inrupt/solid-client-authn-browser\";\n\nimport styles from \"./App.module.css\";\nimport Profile from \"./components/Profile\";\nimport { FormSection } from \"./components/Profile/_components/FormSection\";\nimport { SessionContext } from \"./SessionContext\";\n\nfunction App() {\n  const [session, setSession] = useState<Session | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    setIsLoading(true);\n    handleIncomingRedirect({ restorePreviousSession: true }).then(() => {\n      const session = getDefaultSession();\n      if (session.info.isLoggedIn) {\n        setSession(session);\n      } else {\n        setSession(null);\n      }\n      setIsLoading(false);\n    });\n  }, []);\n\n  if (isLoading) return <div className={styles.main}>Loading...</div>;\n\n  return (\n    <ThemeProvider>\n      <div className={styles.main}>\n        <BaseStyles>\n          {!!session && session.info.webId ? (\n            <SessionContext.Provider value={session}>\n              <Profile />\n            </SessionContext.Provider>\n          ) : (\n            <>\n              <Formik\n                initialValues={{ webId: \"\" }}\n                onSubmit={(values) => {\n                  const { webId } = values;\n                  if (webId) {\n                    const webIdObject = new URL(webId);\n                    login({\n                      oidcIssuer: webIdObject.protocol + webIdObject.host,\n                    });\n                  }\n                }}\n              >\n                {({ values, handleChange }) => (\n                  <Form>\n                    <FormSection\n                      label=\"Enter your WebId or Identity Provider url to login\"\n                      placeholder=\"WebId or Identity Provider url\"\n                      name=\"webId\"\n                      defaultValue={values.webId}\n                      onChange={handleChange}\n                    />\n                    <Button css name=\"submit\" className={styles.login}>\n                      Login\n                    </Button>\n                  </Form>\n                )}\n              </Formik>\n            </>\n          )}\n        </BaseStyles>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Profile_main__2yfI1\",\"section\":\"Profile_section__1vp1e\",\"label\":\"Profile_label__3Zjy8\",\"buttons\":\"Profile_buttons__23uOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"App_main__3ZkGI\",\"login\":\"App_login__jFnyu\"};","var map = {\n\t\"./N3Lexer\": 313,\n\t\"./N3Lexer.js\": 313,\n\t\"./N3Parser\": 314,\n\t\"./N3Parser.js\": 314,\n\t\"./N3Store\": 499,\n\t\"./N3Store.js\": 499,\n\t\"./N3StreamParser\": 500,\n\t\"./N3StreamParser.js\": 500,\n\t\"./N3StreamWriter\": 501,\n\t\"./N3StreamWriter.js\": 501,\n\t\"./N3Util\": 315,\n\t\"./N3Util.js\": 315,\n\t\"./N3Writer\": 316,\n\t\"./N3Writer.js\": 316\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 935;"],"sourceRoot":""}