{"version":3,"sources":["components/Profile/Profile.module.css","App.module.css","../node_modules/n3/lib sync /^/.//N3.*$","../node_modules/shex/lib sync","shapes/shex.ts","components/Profile/_components/FormSection.tsx","components/Profile/Profile.tsx","App.tsx","index.tsx"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","webpackEmptyContext","SolidProfileShapeType","EmailShapeType","SolidProfileShapeContext","EmailShapeContext","solidProfileShex","solidProfile","Shape","shape","context","type","childContexts","FormSection","name","label","placeholder","defaultValue","onChange","className","styles","section","fontWeight","css","Profile","webId","useState","profile","setProfile","error","setError","useEffect","findOne","from","where","then","data","errors","hasEmail","fontSize","marginBottom","initialValues","email","value","replace","onSubmit","a","console","debug","update","doc","result","log","values","handleChange","dirty","touched","buttons","marginRight","onClick","auth","logout","window","location","reload","disabled","App","loggedInWebId","setLoggedInWebId","currentSession","session","main","webIdObject","URL","login","protocol","host","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f85928cc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Profile_main__2yfI1\",\"section\":\"Profile_section__1vp1e\",\"label\":\"Profile_label__3Zjy8\",\"buttons\":\"Profile_buttons__23uOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"App_main__3ZkGI\",\"login\":\"App_login__jFnyu\"};","var map = {\n\t\"./N3Lexer\": 182,\n\t\"./N3Lexer.js\": 182,\n\t\"./N3Parser\": 183,\n\t\"./N3Parser.js\": 183,\n\t\"./N3Store\": 246,\n\t\"./N3Store.js\": 246,\n\t\"./N3StreamParser\": 247,\n\t\"./N3StreamParser.js\": 247,\n\t\"./N3StreamWriter\": 252,\n\t\"./N3StreamWriter.js\": 252,\n\t\"./N3Util\": 184,\n\t\"./N3Util.js\": 184,\n\t\"./N3Writer\": 188,\n\t\"./N3Writer.js\": 188\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 403;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 701;","import { NamedNode, Literal } from \"rdflib\";\n\nexport interface BasicShape {\n  id: string;\n}\n\nimport { Shape } from \"shex-methods\";\n\nexport type SolidProfileShape = {\n  hasEmail?: EmailShape | EmailShape[]; // The person's email.\n  name?: string | Literal; // An alternate way to define a person's name\n} & {\n  type: (\n    | SolidProfileShapeType.SchemPerson\n    | SolidProfileShapeType.FoafPerson\n  )[]; // Defines the node as a Person\n} & BasicShape;\n\nexport type EmailShape = {\n  value: string | NamedNode; // The value of an email as a mailto link (Example <mailto:jane@example.com>)\n} & {\n  type?: (\n    | EmailShapeType.Dom\n    | EmailShapeType.Home\n    | EmailShapeType.Isdn\n    | EmailShapeType.Internet\n    | EmailShapeType.Intl\n    | EmailShapeType.Label\n    | EmailShapeType.Parcel\n    | EmailShapeType.Postal\n    | EmailShapeType.Pref\n    | EmailShapeType.Work\n    | EmailShapeType.X400\n  )[]; // The type of email.\n} & BasicShape;\n\nexport enum SolidProfileShapeType {\n  SchemPerson = \"http://schema.org/Person\",\n  FoafPerson = \"http://xmlns.com/foaf/0.1/Person\",\n}\n\nexport enum EmailShapeType {\n  Dom = \"http://www.w3.org/2006/vcard/ns#Dom\",\n  Home = \"http://www.w3.org/2006/vcard/ns#Home\",\n  Isdn = \"http://www.w3.org/2006/vcard/ns#ISDN\",\n  Internet = \"http://www.w3.org/2006/vcard/ns#Internet\",\n  Intl = \"http://www.w3.org/2006/vcard/ns#Intl\",\n  Label = \"http://www.w3.org/2006/vcard/ns#Label\",\n  Parcel = \"http://www.w3.org/2006/vcard/ns#Parcel\",\n  Postal = \"http://www.w3.org/2006/vcard/ns#Postal\",\n  Pref = \"http://www.w3.org/2006/vcard/ns#Pref\",\n  Work = \"http://www.w3.org/2006/vcard/ns#Work\",\n  X400 = \"http://www.w3.org/2006/vcard/ns#X400\",\n}\n\nexport enum SolidProfileShapeContext {\n  type = \"rdf:type\",\n  hasEmail = \"vcard:hasEmail\",\n  name = \"foaf:name\",\n}\n\nexport enum EmailShapeContext {\n  type = \"rdf:type\",\n  value = \"vcard:value\",\n}\n\nexport const solidProfileShex = `\nPREFIX srs: <https://shaperepo.com/schemas/solidProfile#>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX schem: <http://schema.org/>\nPREFIX vcard: <http://www.w3.org/2006/vcard/ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n\nsrs:SolidProfileShape EXTRA a {\n  a [ schem:Person ]\n    // rdfs:comment  \"Defines the node as a Person\" ;\n  a [ foaf:Person ]\n    // rdfs:comment  \"Defines the node as a Person\" ;\n  vcard:hasEmail @srs:EmailShape *\n    // rdfs:comment  \"The person's email.\" ;\n  foaf:name xsd:string ?\n    // rdfs:comment  \"An alternate way to define a person's name\" ;\n}\n\nsrs:EmailShape EXTRA a {\n  a [\n    vcard:Dom\n    vcard:Home\n    vcard:ISDN\n    vcard:Internet\n    vcard:Intl\n    vcard:Label\n    vcard:Parcel\n    vcard:Postal\n    vcard:Pref\n    vcard:Work\n    vcard:X400\n  ] ?\n    // rdfs:comment  \"The type of email.\" ;\n  vcard:value IRI\n    // rdfs:comment  \"The value of an email as a mailto link (Example <mailto:jane@example.com>)\" ;\n}\n`;\n\nexport const solidProfile = new Shape<SolidProfileShape>({\n  id: \"https://shaperepo.com/schemas/solidProfile#SolidProfileShape\",\n  shape: solidProfileShex,\n  context: SolidProfileShapeContext,\n  type: SolidProfileShapeType,\n  childContexts: [EmailShapeContext],\n});\n\nexport const email = new Shape<EmailShape>({\n  id: \"https://shaperepo.com/schemas/solidProfile#EmailShape\",\n  shape: solidProfileShex,\n  context: EmailShapeContext,\n  type: EmailShapeType,\n});\n","import React from \"react\";\nimport { TextInput, Text } from \"@primer/components\";\nimport styles from \"./../Profile.module.css\";\n\nexport interface FormSectionProps {\n  label: string;\n  name: string;\n  defaultValue?: string | number;\n  onChange: React.ChangeEventHandler<HTMLInputElement>;\n  placeholder?: string;\n}\n\nexport const FormSection: React.FC<FormSectionProps> = ({\n  name,\n  label,\n  placeholder,\n  defaultValue,\n  onChange,\n}) => {\n  return (\n    <div className={styles.section}>\n      <Text className={styles.label} fontWeight=\"bold\">\n        {label}\n      </Text>\n      <TextInput\n        css=\"\"\n        name={name}\n        placeholder={placeholder ?? label}\n        defaultValue={defaultValue}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Formik, Form } from \"formik\";\nimport { ButtonPrimary, Text, ButtonDanger } from \"@primer/components\";\nimport auth from \"solid-auth-client\";\nimport { solidProfile, SolidProfileShape, EmailShape } from \"../../shapes/shex\";\n\nimport { FormSection } from \"./_components/FormSection\";\nimport styles from \"./Profile.module.css\";\n\nexport const Profile: React.FC<{ webId: string }> = ({ webId }) => {\n  const [profile, setProfile] = useState<SolidProfileShape | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    solidProfile\n      .findOne({\n        from: webId,\n        where: { id: webId },\n      })\n      .then(({ data, errors }) => {\n        if (errors) {\n          setError(errors[0]);\n        } else if (data) {\n          setProfile(data);\n        }\n      });\n  }, [webId]);\n\n  if (error) {\n    return <div>{error}</div>;\n  } else if (!profile) {\n    return <div>Loading...</div>;\n  }\n\n  const { name, hasEmail } = profile as SolidProfileShape;\n\n  return (\n    <>\n      <Text fontSize=\"2em\" marginBottom=\"16px\">\n        Hello {name}\n      </Text>\n      <Formik\n        initialValues={{\n          name,\n          email: ((hasEmail as EmailShape)?.value as string)?.replace(\n            \"mailto:\",\n            \"\"\n          ),\n        }}\n        onSubmit={async (data) => {\n          console.debug(data);\n          const result = await solidProfile.update({\n            doc: webId,\n            data: {\n              id: webId,\n              name: data.name,\n              hasEmail: {\n                value: data.email && \"mailto:\" + data.email,\n              } as EmailShape,\n            },\n          });\n          console.log(result);\n        }}\n      >\n        {({ values, handleChange, dirty, touched }) => (\n          <Form>\n            <FormSection\n              label=\"Name\"\n              name=\"name\"\n              defaultValue={values.name as string}\n              onChange={handleChange}\n            />\n            <FormSection\n              label=\"Email\"\n              name=\"email\"\n              defaultValue={values.email}\n              onChange={handleChange}\n            />\n            <div className={styles.buttons}>\n              <ButtonDanger\n                css\n                marginRight=\"8px\"\n                onClick={() => {\n                  auth.logout().then(() => {\n                    window.location.reload();\n                  });\n                }}\n              >\n                Logout\n              </ButtonDanger>\n              <ButtonPrimary css disabled={!(dirty || !touched)} name=\"submit\">\n                Submit\n              </ButtonPrimary>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </>\n  );\n};\n\nexport default Profile;\n","import React, { useEffect, useState } from \"react\";\nimport { Formik, Form } from \"formik\";\nimport { ThemeProvider, BaseStyles, Button } from \"@primer/components\";\nimport auth from \"solid-auth-client\";\n\nimport styles from \"./App.module.css\";\nimport Profile from \"./components/Profile\";\nimport { FormSection } from \"./components/Profile/_components/FormSection\";\n\nfunction App() {\n  const [loggedInWebId, setLoggedInWebId] = useState(\"\");\n  useEffect(() => {\n    auth.currentSession().then((session) => {\n      console.debug(session);\n      if (session && session.webId) {\n        setLoggedInWebId(session.webId);\n      } else {\n        setLoggedInWebId(\"\");\n      }\n    });\n  }, []);\n  return (\n    <ThemeProvider>\n      <div className={styles.main}>\n        <BaseStyles>\n          {!!loggedInWebId ? (\n            <Profile webId={loggedInWebId} />\n          ) : (\n            <>\n              <Formik\n                initialValues={{ webId: \"\" }}\n                onSubmit={(values) => {\n                  const { webId } = values;\n                  if (webId) {\n                    const webIdObject = new URL(webId);\n                    auth.login(webIdObject.protocol + webIdObject.host);\n                  }\n                }}\n              >\n                {({ values, handleChange }) => (\n                  <Form>\n                    <FormSection\n                      label=\"Enter your WebId or Identity Provider url to login\"\n                      placeholder=\"WebId or Identity Provider url\"\n                      name=\"webId\"\n                      defaultValue={values.webId}\n                      onChange={handleChange}\n                    />\n                    <Button css name=\"submit\" className={styles.login}>\n                      Login\n                    </Button>\n                  </Form>\n                )}\n              </Formik>\n            </>\n          )}\n        </BaseStyles>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}